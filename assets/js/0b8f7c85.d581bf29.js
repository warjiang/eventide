"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[2676],{7953(e,n,t){t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>p,frontMatter:()=>i,metadata:()=>a,toc:()=>o});const a=JSON.parse('{"id":"examples/simple-agent","title":"Simple Agent \u6848\u4f8b","description":"\u672c\u6307\u5357\u5c06\u901a\u8fc7\u4e00\u4e2a\u7b80\u5355\u7684 ReAct \u6848\u4f8b\uff0c\u5b8c\u6574\u7684\u4ecb\u7ecd\u4e00\u4e2aagent\u5e94\u8be5\u5982\u4f55\u5f00\u53d1\u3001\u53d1\u5e03\u5230 AgentCube \u4e0a\u5e76\u901a\u8fc7 playground \u8c03\u7528\u3002","source":"@site/docs/examples/simple-agent.md","sourceDirName":"examples","slug":"/examples/simple-agent","permalink":"/eventide/docs/examples/simple-agent","draft":false,"unlisted":false,"editUrl":"https://github.com/warjiang/eventide/tree/main/website/docs/examples/simple-agent.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6},"sidebar":"tutorialSidebar","previous":{"title":"Lumina \u6848\u4f8b","permalink":"/eventide/docs/examples/lumina"},"next":{"title":"Open Perplexity Agent \u6848\u4f8b","permalink":"/eventide/docs/examples/open-perplexity-agent"}}');var s=t(4848),l=t(8453);const i={sidebar_position:6},r="Simple Agent \u6848\u4f8b",c={},o=[{value:"Agent \u5f00\u53d1",id:"agent-\u5f00\u53d1",level:2},{value:"Agent \u53d1\u5e03",id:"agent-\u53d1\u5e03",level:2},{value:"Agent \u8c03\u7528",id:"agent-\u8c03\u7528",level:2}];function d(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"simple-agent-\u6848\u4f8b",children:"Simple Agent \u6848\u4f8b"})}),"\n",(0,s.jsx)(n.p,{children:"\u672c\u6307\u5357\u5c06\u901a\u8fc7\u4e00\u4e2a\u7b80\u5355\u7684 ReAct \u6848\u4f8b\uff0c\u5b8c\u6574\u7684\u4ecb\u7ecd\u4e00\u4e2aagent\u5e94\u8be5\u5982\u4f55\u5f00\u53d1\u3001\u53d1\u5e03\u5230 AgentCube \u4e0a\u5e76\u901a\u8fc7 playground \u8c03\u7528\u3002"}),"\n",(0,s.jsx)(n.h2,{id:"agent-\u5f00\u53d1",children:"Agent \u5f00\u53d1"}),"\n",(0,s.jsx)(n.p,{children:"\u521d\u59cb\u5316\u4e00\u4e2aagent\u76ee\u5f55\uff0c\u76ee\u5f55\u7ed3\u6784\u5982\u4e0b\uff1a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"simple-agent/\n\u251c\u2500\u2500 agent.py\n\u251c\u2500\u2500 Dockerfile\n\u251c\u2500\u2500 main.py\n\u251c\u2500\u2500 pyproject.toml\n\u251c\u2500\u2500 README.md\n\u251c\u2500\u2500 agent_metadata.yaml\n\u2514\u2500\u2500 uv.lock\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"agent.py"}),"\uff1aagent\u7684\u4e3b\u8981\u903b\u8f91\u4ee3\u7801\uff0c\u53ef\u4ee5\u9009\u7528\u4efb\u4f55\u4f60\u719f\u6089\u7684Agent\u6846\u67b6\uff0c\u751a\u81f3\u652f\u6301\u624b\u6413\u3002"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"main.py"}),"\uff1aAgentRuntime\u7684\u5165\u53e3\u6587\u4ef6\uff0c\u7528\u4e8e\u542f\u52a8agent\uff0c\u8003\u8651\u5230\u5b9e\u9645\u4ea4\u4e92\u573a\u666f\uff0c\u63a8\u8350\u4f7f\u7528http server\u6765\u542f\u52a8\uff0c\u7b49\u5f85\u7528\u6237\u8bf7\u6c42\u3002"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"Dockerfile"}),"\uff1a\u7528\u4e8e\u6784\u5efaagent\u7684Docker\u955c\u50cf\u3002"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"pyproject.toml"}),"\uff1aPython\u9879\u76ee\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u7528\u4e8e\u7ba1\u7406\u4f9d\u8d56\u548c\u6784\u5efa\u3002"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"uv.lock"}),"\uff1aPython\u4f9d\u8d56\u7684\u9501\u5b9a\u6587\u4ef6\uff0c\u7528\u4e8e\u786e\u4fdd\u4f9d\u8d56\u7684\u4e00\u81f4\u6027\u3002"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"agent_metadata.yaml"}),"\uff1aagent \u7684\u5143\u6570\u636e\u6587\u4ef6\u4e3b\u8981\u7ed9 AgentCube \u7cfb\u7edf\u4f7f\u7528\uff0c\u7528\u4e8e\u63cf\u8ff0agent\u7684\u57fa\u672c\u4fe1\u606f\uff0c\u5982\u540d\u79f0\u3001\u7248\u672c\u3001\u63cf\u8ff0\u7b49\u3002"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"README.md"}),"\uff1aagent \u7684\u8bf4\u660e\u6587\u6863\u3002"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"agent-\u53d1\u5e03",children:"Agent \u53d1\u5e03"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["\u76ee\u524d\u4e0d\u63a8\u8350\u8d70 AgentCube \u63d0\u4f9b\u7684 ",(0,s.jsx)(n.code,{children:"kubectl agentcube pack"})," \u6765\u6253\u5305 agent\uff0c\u5efa\u8bae\u53ef\u4ee5\u624b\u52a8\u6253\u5305\uff0c\u901f\u5ea6\u66f4\u5feb"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["\u4e00\u4e2a\u5408\u6cd5\u7684 ",(0,s.jsx)(n.code,{children:"agent_metadata.yaml"})," \u6587\u4ef6\u5982\u4e0b, \u5728\u5f53\u524d\u76ee\u5f55\u4e0b\u521b\u5efa ",(0,s.jsx)(n.code,{children:"agent_metadata.yaml"})," \u6587\u4ef6"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"agent_name: simple-agent\nlanguage: python\nentrypoint: python main.py\nport: 8080\nbuild_mode: cloud\nimage:\n  repository_url: {repository_url}\nrequirements_file: requirements.txt\nregistry_url: {private_registry_url}\nregistry_username: {registry_username}\nregistry_password: {registry_password}\nagent_endpoint: http://localhost:18081\nworkload_manager_url: http://workloadmanager.agentcube.svc:8080\nrouter_url: http://agentcube-router.agentcube.svc:8080\nreadiness_probe_path: /health\nreadiness_probe_port: 8080\nagent_id: simple-agent\nk8s_deployment:\n  deployment_name: simple-agent\n  namespace: default\n  status: deployed\n  type: AgentRuntime\n\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u6267\u884c\u4e0b\u9762\u7684\u547d\u4ee4\u53d1\u5e03Agent\u5230 AgentCube \u7cfb\u7edf\u4e2d\uff1a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"uv add agentcube-cli kubernetes\nexport KUBECONFIG=~/.kube/agentcube-config\nkubectl agentcube publish --provider agentcube -f . --verbose\n"})}),"\n",(0,s.jsxs)(n.p,{children:["\u53d1\u5e03\u5b8c\u6210\u540e\u6267\u884c ",(0,s.jsx)(n.code,{children:"kubectl get agentruntime -n default"})," \u53ef\u4ee5\u770b\u5230\u7cfb\u7edf\u4e2d\u4f1a\u591a\u4e00\u4e2aAgentRuntime\u7684\u8d44\u6e90\uff1a"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"simple-agent-agentruntime.png",src:t(1552).A+"",width:"1258",height:"250"})}),"\n",(0,s.jsxs)(n.p,{children:["\u6267\u884c ",(0,s.jsx)(n.code,{children:"kubectl get agentruntime simple-agent -n default -o yaml"})," \u53ef\u4ee5\u770b\u5230AgentRuntime\u8d44\u6e90\u7684\u8be6\u7ec6\u4fe1\u606f\uff1a"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'apiVersion: runtime.agentcube.volcano.sh/v1alpha1\nkind: AgentRuntime\nmetadata:\n  annotations: {}\n  creationTimestamp: "2026-02-20T06:57:56Z"\n  generation: 36\n  labels:\n    app: simple-agent\n  name: simple-agent\n  namespace: default\n  resourceVersion: "1016557"\n  uid: 4854498f-2809-47b3-888c-98d6237a2aa3\nspec:\n  maxSessionDuration: 8h\n  podTemplate:\n    spec:\n      containers:\n      - args:\n        - main.py\n        command:\n        - python\n        env:\n        - name: WORKLOAD_MANAGER_URL\n          value: http://workloadmanager.agentcube.svc:8080\n        - name: ROUTER_URL\n          value: http://agentcube-router.agentcube.svc:8080\n        - name: EVENT_GATEWAY_URL\n          value: http://eventide-gateway.eventide.svc.cluster.local:18081\n        image: simple-agent:0.0.17\n        imagePullPolicy: IfNotPresent\n        name: runtime\n        ports:\n        - containerPort: 8080\n          name: http\n          protocol: TCP\n        readinessProbe:\n          httpGet:\n            path: /health\n            port: 8080\n          initialDelaySeconds: 3\n      imagePullSecrets:\n      - name: default-secret\n      restartPolicy: Always\n  sessionTimeout: 15m\n  targetPort:\n  - pathPrefix: /\n    port: 8080\n    protocol: HTTP\n'})}),"\n",(0,s.jsx)(n.h2,{id:"agent-\u8c03\u7528",children:"Agent \u8c03\u7528"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"\u901a\u8fc7 kubectl \u63d2\u4ef6\u8c03\u7528"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:'kubectl agentcube invoke -f  . --payload \'{"prompt": "1+2*3"}\' --verbose\n'})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"\u901a\u8fc7 HTTP \u8c03\u7528"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:'curl -v -X POST http://agentcube-router.agentcube.svc:8080/v1/namespaces/default/agent-runtimes/simple-agent/invocations/runcmd \\ \n    -H "Content-Type: application/json" \\\n    -d \'{"payload": {"prompt": "what is 1+2+3?"}}\'\n'})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"\u901a\u8fc7 AgentCube sdk \u8c03\u7528(WIP \u5f85PR\u5408\u5e76):"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'from agentcube import AgentRuntimeClient\n\n# first time: it will create a new pod\nagent_client_v1 = AgentRuntimeClient(\n    agent_name="my-agent",\n    router_url="http://localhost:18081",\n    namespace="default",\n    verbose=True,\n)\nprint(agent_client_v1.session_id)\n\nresult_v1 = agent_client_v1.invoke(\n    payload={"prompt": "Hello World!"},\n)\nprint(result_v1)\n\n# second time: it will try to reuse the pod created before\nagent_client_v2 = AgentRuntimeClient(\n    agent_name="my-agent",\n    router_url="http://localhost:18081",\n    namespace="default",\n    session_id=agent_client_v1.session_id,\n    verbose=True,\n)\n# same with the first time\nprint(agent_client_v2.session_id)\n\nresult_v2 = agent_client_v2.invoke(\n    payload={"prompt": "Hello World!"},\n)\nprint(result_v2)\n'})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"\u901a\u8fc7 Eventide Playground \u8c03\u7528:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"export KUBECONFIG=~/.kube/agentcube-config\nkubectl port-forward -n eventide svc/eventide-playground 28000:8000\n"})}),"\n",(0,s.jsxs)(n.p,{children:["\u6253\u5f00\u6d4f\u89c8\u5668\u8bbf\u95ee ",(0,s.jsx)(n.code,{children:"http://localhost:28000"}),"\uff0c\u53ef\u4ee5\u770b\u5230 Playground \u754c\u9762\uff0c\u5207\u6362\u521a\u521a\u53d1\u5e03\u7684 ",(0,s.jsx)(n.code,{children:"simple-agent"})," \uff1a"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"simple-agent-playground01",src:t(7623).A+"",width:"3638",height:"2246"})}),"\n",(0,s.jsx)(n.p,{children:"\u7b2c\u4e00\u6b21\u6267\u884c\u7684\u65f6\u5019\u4f1a\u81ea\u52a8\u62c9\u8d77\u4e00\u4e2a\u65b0\u7684pod\uff0c\u540e\u7eed\u7684\u8c03\u7528\u4f1a\u5c1d\u8bd5\u590d\u7528\u8fd9\u4e2apod\uff0c\u51cf\u5c11\u51b7\u542f\u52a8\u65f6\u95f4\uff1a"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"simple-agent-playground02",src:t(4972).A+"",width:"4986",height:"1336"})}),"\n",(0,s.jsx)(n.p,{children:"\u7b2c\u4e8c\u6b21\u6267\u884c\u7684\u65f6\u5019\u4e0d\u4f1a\u91cd\u65b0\u521b\u5efapod\uff0c\u800c\u662f\u76f4\u63a5\u8c03\u7528\u5df2\u7ecf\u5b58\u5728\u7684pod:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"simple-agent-playground03",src:t(885).A+"",width:"4424",height:"3080"})}),"\n"]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},1552(e,n,t){t.d(n,{A:()=>a});const a=t.p+"assets/images/simple-agent-agentruntime-1b2efe4b19b983b91b9c6aeedf86726a.png"},7623(e,n,t){t.d(n,{A:()=>a});const a=t.p+"assets/images/simple-agent-playground01-19d5730c9ff97374c3c5c4d60a0ccc28.png"},4972(e,n,t){t.d(n,{A:()=>a});const a=t.p+"assets/images/simple-agent-playground02-b12a767483ee022eb360c81813d227e6.png"},885(e,n,t){t.d(n,{A:()=>a});const a=t.p+"assets/images/simple-agent-playground03-e97893201b598e808e99e59902f21bc0.png"},8453(e,n,t){t.d(n,{R:()=>i,x:()=>r});var a=t(6540);const s={},l=a.createContext(s);function i(e){const n=a.useContext(l);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),a.createElement(l.Provider,{value:n},e.children)}}}]);