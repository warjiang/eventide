"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[7924],{6475(e,n,t){t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>u,frontMatter:()=>a,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"getting-started","title":"Eventide \u5b89\u88c5","description":"\u672c\u6307\u5357\u5c06\u5e2e\u52a9\u4f60\u5feb\u901f\u642d\u5efa Lumina Scheduler \u73af\u5883\u3002","source":"@site/docs/getting-started.md","sourceDirName":".","slug":"/getting-started","permalink":"/eventide/docs/getting-started","draft":false,"unlisted":false,"editUrl":"https://github.com/warjiang/eventide/tree/main/website/docs/getting-started.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"\u4ec0\u4e48\u662f Eventide","permalink":"/eventide/docs/intro"},"next":{"title":"Event \u5b9a\u4e49","permalink":"/eventide/docs/event-types"}}');var i=t(4848),r=t(8453);const a={sidebar_position:2},c="Eventide \u5b89\u88c5",l={},d=[{value:"\u73af\u5883\u51c6\u5907",id:"\u73af\u5883\u51c6\u5907",level:2},{value:"1. \u5b89\u88c5\u7cfb\u7edf\u4f9d\u8d56",id:"1-\u5b89\u88c5\u7cfb\u7edf\u4f9d\u8d56",level:3},{value:"Linux \u7cfb\u7edf\u914d\u7f6e",id:"linux-\u7cfb\u7edf\u914d\u7f6e",level:4},{value:"\u5b89\u88c5 Kind \u548c Kubectl",id:"\u5b89\u88c5-kind-\u548c-kubectl",level:4},{value:"2. \u521d\u59cb\u5316 Docker",id:"2-\u521d\u59cb\u5316-docker",level:3},{value:"3. \u521b\u5efa Kind \u96c6\u7fa4",id:"3-\u521b\u5efa-kind-\u96c6\u7fa4",level:3},{value:"4. \u914d\u7f6e kubeconfig",id:"4-\u914d\u7f6e-kubeconfig",level:3},{value:"5. \u9a8c\u8bc1\u96c6\u7fa4",id:"5-\u9a8c\u8bc1\u96c6\u7fa4",level:3},{value:"\u5b89\u88c5 AgentCube",id:"\u5b89\u88c5-agentcube",level:2},{value:"1. \u5b89\u88c5 Agent-Sandbox",id:"1-\u5b89\u88c5-agent-sandbox",level:3},{value:"2. \u521b\u5efa agentcube \u547d\u540d\u7a7a\u95f4",id:"2-\u521b\u5efa-agentcube-\u547d\u540d\u7a7a\u95f4",level:3},{value:"3. \u90e8\u7f72 Redis",id:"3-\u90e8\u7f72-redis",level:3},{value:"4. \u5b89\u88c5 AgentCube",id:"4-\u5b89\u88c5-agentcube",level:3},{value:"5. \u5b89\u88c5 Eventide",id:"5-\u5b89\u88c5-eventide",level:3},{value:"\u4e0b\u4e00\u6b65",id:"\u4e0b\u4e00\u6b65",level:2}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"eventide-\u5b89\u88c5",children:"Eventide \u5b89\u88c5"})}),"\n",(0,i.jsx)(n.p,{children:"\u672c\u6307\u5357\u5c06\u5e2e\u52a9\u4f60\u5feb\u901f\u642d\u5efa Lumina Scheduler \u73af\u5883\u3002"}),"\n",(0,i.jsx)(n.h2,{id:"\u73af\u5883\u51c6\u5907",children:"\u73af\u5883\u51c6\u5907"}),"\n",(0,i.jsx)(n.h3,{id:"1-\u5b89\u88c5\u7cfb\u7edf\u4f9d\u8d56",children:"1. \u5b89\u88c5\u7cfb\u7edf\u4f9d\u8d56"}),"\n",(0,i.jsx)(n.h4,{id:"linux-\u7cfb\u7edf\u914d\u7f6e",children:"Linux \u7cfb\u7edf\u914d\u7f6e"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# \u63d0\u5347 fd \u4e0a\u9650\nsudo sysctl fs.inotify.max_user_watches=1255360\n"})}),"\n",(0,i.jsx)(n.h4,{id:"\u5b89\u88c5-kind-\u548c-kubectl",children:"\u5b89\u88c5 Kind \u548c Kubectl"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"TBD\n"})}),"\n",(0,i.jsx)(n.h3,{id:"2-\u521d\u59cb\u5316-docker",children:"2. \u521d\u59cb\u5316 Docker"}),"\n",(0,i.jsxs)(n.p,{children:["\u786e\u4fdd Docker \u5df2\u542f\u52a8\uff0c\u5e76\u521b\u5efa ",(0,i.jsx)(n.code,{children:"docker-config.json"})," \u6587\u4ef6\u7528\u4e8e\u955c\u50cf\u62c9\u53d6\u3002\n",(0,i.jsx)(n.code,{children:"docker-config.json"})," \u5185\u5bb9\u5982\u4e0b\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "auths": {\n    "${your-registry-domain}": {\n      "auth": "base64(${your-username}:${your-password})"\n    }\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"3-\u521b\u5efa-kind-\u96c6\u7fa4",children:"3. \u521b\u5efa Kind \u96c6\u7fa4"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:'# \u521b\u5efa agentcube \u96c6\u7fa4\ncat <<EOF | kind create cluster --name=agentcube --config=-\nkind: Cluster\napiVersion: kind.x-k8s.io/v1alpha4\nnetworking:\n  apiServerAddress: "0.0.0.0"\nnodes:\n- role: control-plane\n  image: kindest/node:v1.31.4\n  extraMounts:\n  - containerPath: /var/lib/kubelet/config.json\n    hostPath: /path/to/docker-config.json\nEOF\n'})}),"\n",(0,i.jsx)(n.h3,{id:"4-\u914d\u7f6e-kubeconfig",children:"4. \u914d\u7f6e kubeconfig"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"# \u5bfc\u51fa\u96c6\u7fa4\u914d\u7f6e\nkind get kubeconfig --name agentcube > ~/.kube/agentcube-config\n\n# \u4ece\u8fdc\u7a0b\u673a\u5668\u590d\u5236\u914d\u7f6e\nscp ${remote-machine}:~/.kube/agentcube-config ~/.kube/\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u4fee\u6539 ",(0,i.jsx)(n.code,{children:"agentcube-config"})," \u914d\u7f6e\u6587\u4ef6\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"apiVersion: v1\nclusters:\n- cluster:\n    insecure-skip-tls-verify: true\n    server: https://192.168.16.8:33767\n  name: kind-agentcube\ncontexts:\n- context:\n    cluster: kind-agentcube\n    user: kind-agentcube\n  name: kind-agentcube\ncurrent-context: kind-agentcube\nkind: Config\nusers:\n- name: kind-agentcube\n"})}),"\n",(0,i.jsx)(n.h3,{id:"5-\u9a8c\u8bc1\u96c6\u7fa4",children:"5. \u9a8c\u8bc1\u96c6\u7fa4"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"export KUBECONFIG=~/.kube/agentcube-config\nkubectl get pod -A\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u5982\u679c\u6b63\u5e38\u53ef\u4ee5\u770b\u5230\u5982\u4e0b\u7ed3\u679c\uff1a\n",(0,i.jsx)(n.img,{alt:"verify-kind.png",src:t(5920).A+"",width:"1732",height:"488"})]}),"\n",(0,i.jsx)(n.h2,{id:"\u5b89\u88c5-agentcube",children:"\u5b89\u88c5 AgentCube"}),"\n",(0,i.jsx)(n.h3,{id:"1-\u5b89\u88c5-agent-sandbox",children:"1. \u5b89\u88c5 Agent-Sandbox"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"AGENT_SANDBOX_VERSION=v0.1.1\nwget https://github.com/kubernetes-sigs/agent-sandbox/releases/download/${AGENT_SANDBOX_VERSION}/manifest.yaml\nwget https://github.com/kubernetes-sigs/agent-sandbox/releases/download/${AGENT_SANDBOX_VERSION}/extensions.yaml\n\nkubectl apply -f manifest.yaml\nkubectl apply -f extensions.yaml\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u9a8c\u8bc1\u5b89\u88c5\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"kubectl get pod -n agent-sandbox-system\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u5982\u679c\u6b63\u5e38\u53ef\u4ee5\u770b\u5230\u5982\u4e0b\u7ed3\u679c\uff1a\n",(0,i.jsx)(n.img,{alt:"verify-agentsandbox",src:t(774).A+"",width:"1354",height:"96"})]}),"\n",(0,i.jsx)(n.h3,{id:"2-\u521b\u5efa-agentcube-\u547d\u540d\u7a7a\u95f4",children:"2. \u521b\u5efa agentcube \u547d\u540d\u7a7a\u95f4"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"kubectl create namespace agentcube\n"})}),"\n",(0,i.jsx)(n.h3,{id:"3-\u90e8\u7f72-redis",children:"3. \u90e8\u7f72 Redis"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"kubectl -n agentcube create deployment redis --image=redis:7-alpine --port=6379\nkubectl -n agentcube expose deployment redis --port=6379 --target-port=6379\nkubectl -n agentcube rollout status deployment/redis\n"})}),"\n",(0,i.jsx)(n.h3,{id:"4-\u5b89\u88c5-agentcube",children:"4. \u5b89\u88c5 AgentCube"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'git clone https://github.com/volcano-sh/agentcube.git\ncd agentcube\n\nhelm upgrade --install agentcube ./manifests/charts/base \\\n    --namespace agentcube \\\n    --create-namespace \\\n    --set redis.addr="redis.agentcube.svc.cluster.local:6379" \\\n    --set redis.password="\'\'" \\\n    --set router.rbac.create=true \\\n    --set router.serviceAccountName="agentcube-router"\n'})}),"\n",(0,i.jsx)(n.p,{children:"\u4f1a\u5b89\u88c5\u5982\u4e0b\u4e09\u4e2a\u8d44\u6e90"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["AgentCube CRDs (",(0,i.jsx)(n.code,{children:"CodeInterpreter"}),",\xa0",(0,i.jsx)(n.code,{children:"AgentRuntime"}),")"]}),"\n",(0,i.jsx)(n.li,{children:"Workload Manager deployment"}),"\n",(0,i.jsx)(n.li,{children:"AgentCube Router deployment"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\u6267\u884c ",(0,i.jsx)(n.code,{children:"kubectl get pods -n agentcube"}),"\u9a8c\u8bc1\uff1a"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"verify-agentcube",src:t(2596).A+"",width:"1314",height:"170"})}),"\n",(0,i.jsx)(n.h3,{id:"5-\u5b89\u88c5-eventide",children:"5. \u5b89\u88c5 Eventide"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"git clone git@github.com:warjiang/eventide.git\ncd charts\n# \u5728eventide\u76ee\u5f55\u4e0b\u521b\u5efavalues-onpremise.yaml\nhelm upgrade --install eventide ./eventide -f ./eventide/values-onpremise.yaml -n eventide --create-namespace\n"})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"values-onpremise.yaml"})," \u5185\u5bb9\u53c2\u8003\u5982\u4e0b\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'nameOverride: ""\nfullnameOverride: ""\n\nimagePullSecrets: []\n\nsecrets:\n  create: true\n\nconfig:\n  redis:\n    addr: ""\n    username: ""\n    password: ""\n    db: 0\n\n  postgres:\n    connString: ""\n\n  s3:\n    endpoint: ""\n    region: "us-east-1"\n    bucket: "eventide"\n    accessKeyID: "eventide"\n    secretAccessKey: "eventide"\n    prefix: "eventide"\n    usePathStyle: true\n\n  streams:\n    trimMaxLen: 100000\n\ngateway:\n  enabled: true\n  replicaCount: 1\n  image:\n    repository: ghcr.io/warjiang/eventide/gateway\n    tag: "latest"\n    pullPolicy: IfNotPresent\n  service:\n    type: ClusterIP\n    port: 18081\n  resources: {}\n\nbeacon:\n  enabled: true\n  replicaCount: 1\n  image:\n    repository: ghcr.io/warjiang/eventide/beacon\n    tag: "latest"\n    pullPolicy: IfNotPresent\n  service:\n    type: ClusterIP\n    port: 18082\n  resources: {}\n\npersister:\n  enabled: true\n  replicaCount: 1\n  image:\n    repository: ghcr.io/warjiang/eventide/persister\n    tag: "latest"\n    pullPolicy: IfNotPresent\n  tenantID: "default"\n  idleTimeoutSeconds: 900\n  group: "persist"\n  consumer: ""\n  dlqStream: "stream:global:dlq"\n  maxRetries: 5\n  resources: {}\n\nreferenceAgent:\n  enabled: true\n  replicaCount: 1\n  image:\n    repository: ghcr.io/warjiang/eventide/reference-agent\n    tag: "latest"\n    pullPolicy: IfNotPresent\n  service:\n    type: ClusterIP\n    port: 18080\n  resources: {}\n\nplayground:\n  enabled: true\n  replicaCount: 1\n  serviceAccount:\n    create: true\n    name: ""\n  image:\n    repository: ghcr.io/warjiang/eventide/playground\n    tag: "latest"\n    pullPolicy: IfNotPresent\n  service:\n    type: ClusterIP\n    port: 18083\n  resources: {}\n\nmigrate:\n  enabled: true\n  image:\n    repository: ghcr.io/warjiang/eventide/migrate\n    tag: "latest"\n    pullPolicy: IfNotPresent\n\narchiver:\n  enabled: false\n  image:\n    repository: ghcr.io/warjiang/eventide/archiver\n    tag: "latest"\n    pullPolicy: IfNotPresent\n  schedule: ""\n  threadID: ""\n  fromSeq: 1\n  toSeq: 0\n\npostgresql:\n  enabled: true\n  auth:\n    username: eventide\n    password: eventide\n    database: eventide\n  primary:\n    persistence:\n      enabled: true\n      size: 8Gi\n\nredis:\n  enabled: true\n  auth:\n    enabled: false\n    password: ""\n  master:\n    persistence:\n      enabled: true\n      size: 8Gi\n\nseaweedfs:\n  enabled: true\n  image:\n    repository: chrislusf/seaweedfs\n    tag: "4.02"\n    pullPolicy: IfNotPresent\n  persistence:\n    enabled: true\n    size: 20Gi\n    storageClassName: ""\n  service:\n    type: ClusterIP\n    ports:\n      master: 9333\n      volume: 8080\n      public: 8888\n      s3: 8333\n\n'})}),"\n",(0,i.jsx)(n.h2,{id:"\u4e0b\u4e00\u6b65",children:"\u4e0b\u4e00\u6b65"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u67e5\u770b ",(0,i.jsx)(n.a,{href:"./api-reference",children:"API \u53c2\u8003"})]}),"\n",(0,i.jsxs)(n.li,{children:["\u4e86\u89e3 ",(0,i.jsx)(n.a,{href:"./event-types",children:"\u4e8b\u4ef6\u7c7b\u578b"})]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},2596(e,n,t){t.d(n,{A:()=>s});const s=t.p+"assets/images/verify-agentcube-c6a98b16f7f17b80a7b073a74c7f853f.png"},774(e,n,t){t.d(n,{A:()=>s});const s=t.p+"assets/images/verify-agentsandbox-056d75154e0c454540409beea1eb50c5.png"},5920(e,n,t){t.d(n,{A:()=>s});const s=t.p+"assets/images/verify-kind-f71730e586793bca8cf090b0d0b4a5b9.png"},8453(e,n,t){t.d(n,{R:()=>a,x:()=>c});var s=t(6540);const i={},r=s.createContext(i);function a(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);