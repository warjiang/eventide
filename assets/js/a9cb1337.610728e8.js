"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[8e3],{6011(e,n,t){t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>s,default:()=>p,frontMatter:()=>l,metadata:()=>d,toc:()=>c});const d=JSON.parse('{"id":"sdk/python-sdk","title":"Python SDK","description":"Eventide Python SDK \u662f Eventide \u4e8b\u4ef6\u7f51\u5173\u7684\u5f02\u6b65\u5ba2\u6237\u7aef\uff0c\u7528\u4e8e\u5411\u4e8b\u4ef6\u7cfb\u7edf\u53d1\u9001\u4e8b\u4ef6\u3002","source":"@site/docs/sdk/python-sdk.md","sourceDirName":"sdk","slug":"/sdk/python-sdk","permalink":"/eventide/docs/sdk/python-sdk","draft":false,"unlisted":false,"editUrl":"https://github.com/warjiang/eventide/tree/main/website/docs/sdk/python-sdk.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6},"sidebar":"tutorialSidebar","previous":{"title":"API \u5b9a\u4e49","permalink":"/eventide/docs/api-reference"},"next":{"title":"GO sdk","permalink":"/eventide/docs/sdk/go-sdk"}}');var i=t(4848),r=t(8453);const l={sidebar_position:6},s="Python SDK",a={},c=[{value:"\u5b89\u88c5",id:"\u5b89\u88c5",level:2},{value:"\u5feb\u901f\u5f00\u59cb",id:"\u5feb\u901f\u5f00\u59cb",level:2},{value:"\u6838\u5fc3\u7c7b\u578b",id:"\u6838\u5fc3\u7c7b\u578b",level:2},{value:"EventType",id:"eventtype",level:3},{value:"Level",id:"level",level:3},{value:"Event",id:"event",level:3},{value:"AppendResult",id:"appendresult",level:3},{value:"GatewayError",id:"gatewayerror",level:3},{value:"\u5ba2\u6237\u7aef\u4f7f\u7528",id:"\u5ba2\u6237\u7aef\u4f7f\u7528",level:2},{value:"\u521d\u59cb\u5316\u5ba2\u6237\u7aef",id:"\u521d\u59cb\u5316\u5ba2\u6237\u7aef",level:3},{value:"\u8ffd\u52a0\u5355\u4e2a\u4e8b\u4ef6",id:"\u8ffd\u52a0\u5355\u4e2a\u4e8b\u4ef6",level:3},{value:"\u6279\u91cf\u8ffd\u52a0\u4e8b\u4ef6",id:"\u6279\u91cf\u8ffd\u52a0\u4e8b\u4ef6",level:3},{value:"\u5173\u95ed\u5ba2\u6237\u7aef",id:"\u5173\u95ed\u5ba2\u6237\u7aef",level:3},{value:"\u5b8c\u6574\u793a\u4f8b",id:"\u5b8c\u6574\u793a\u4f8b",level:2}];function h(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"python-sdk",children:"Python SDK"})}),"\n",(0,i.jsx)(n.p,{children:"Eventide Python SDK \u662f Eventide \u4e8b\u4ef6\u7f51\u5173\u7684\u5f02\u6b65\u5ba2\u6237\u7aef\uff0c\u7528\u4e8e\u5411\u4e8b\u4ef6\u7cfb\u7edf\u53d1\u9001\u4e8b\u4ef6\u3002"}),"\n",(0,i.jsx)(n.h2,{id:"\u5b89\u88c5",children:"\u5b89\u88c5"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"pip install eventide-sdk\n"})}),"\n",(0,i.jsx)(n.h2,{id:"\u5feb\u901f\u5f00\u59cb",children:"\u5feb\u901f\u5f00\u59cb"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'import asyncio\nfrom eventide import GatewayClient, Event, EventType, Level\n\nasync def main():\n    async with GatewayClient("http://127.0.0.1:18081") as client:\n        await client.append(Event(\n            thread_id="t1",\n            turn_id="turn1",\n            type=EventType.TURN_STARTED,\n            payload={"input": {"msg": "hello"}},\n        ))\n\nif __name__ == "__main__":\n    asyncio.run(main())\n'})}),"\n",(0,i.jsx)(n.h2,{id:"\u6838\u5fc3\u7c7b\u578b",children:"\u6838\u5fc3\u7c7b\u578b"}),"\n",(0,i.jsx)(n.h3,{id:"eventtype",children:"EventType"}),"\n",(0,i.jsx)(n.p,{children:"\u4e8b\u4ef6\u7c7b\u578b\u679a\u4e3e\uff0c\u5b9a\u4e49\u4e8b\u4ef6\u7684\u79cd\u7c7b\u3002"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"from eventide import EventType\n\n# Lifecycle\nEventType.TURN_STARTED      # turn.started\nEventType.TURN_COMPLETED     # turn.completed\nEventType.TURN_FAILED        # turn.failed\nEventType.TURN_CANCELLED     # turn.cancelled\n\n# Message\nEventType.MESSAGE_DELTA      # message.delta\nEventType.MESSAGE_COMPLETED  # message.completed\n\n# Tool\nEventType.TOOL_CALL_STARTED       # tool.call.started\nEventType.TOOL_CALL_ARGS_DELTA    # tool.call.args.delta\nEventType.TOOL_CALL_COMPLETED     # tool.call.completed\nEventType.TOOL_CALL_ERROR         # tool.call.error\n\n# State\nEventType.STATE_SNAPSHOT    # state.snapshot\nEventType.STATE_DELTA       # state.delta\n\n# Custom\nEventType.CUSTOM            # custom\n\n# Thread\nEventType.THREAD_READY      # thread.ready\n"})}),"\n",(0,i.jsx)(n.h3,{id:"level",children:"Level"}),"\n",(0,i.jsx)(n.p,{children:"\u4e8b\u4ef6\u7ea7\u522b\u679a\u4e3e\u3002"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"from eventide import Level\n\nLevel.DEBUG  # debug\nLevel.INFO   # info\nLevel.WARN   # warn\nLevel.ERROR  # error\n"})}),"\n",(0,i.jsx)(n.h3,{id:"event",children:"Event"}),"\n",(0,i.jsx)(n.p,{children:"\u8868\u793a\u5355\u4e2a\u4e8b\u4ef6\u7684\u6570\u636e\u7c7b\u3002"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'from eventide import Event, EventType, Level\n\nevent = Event(\n    thread_id="thread_123",\n    turn_id="turn_456",\n    type=EventType.TURN_STARTED,\n    level=Level.INFO,\n    payload={"input": {"msg": "hello"}},\n    # \u53ef\u9009\u5b57\u6bb5\n    content_type="application/json",\n    source={"module": "my-app"},\n    trace={"trace_id": "abc"},\n    tags={"env": "prod"},\n)\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Event \u5b57\u6bb5\u8bf4\u660e"})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"\u5b57\u6bb5"}),(0,i.jsx)(n.th,{children:"\u7c7b\u578b"}),(0,i.jsx)(n.th,{children:"\u5fc5\u586b"}),(0,i.jsx)(n.th,{children:"\u63cf\u8ff0"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"thread_id"}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"\u662f"}),(0,i.jsx)(n.td,{children:"Thread \u6807\u8bc6"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"turn_id"}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"\u662f"}),(0,i.jsx)(n.td,{children:"Turn \u6807\u8bc6"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"type"}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"\u662f"}),(0,i.jsx)(n.td,{children:"\u4e8b\u4ef6\u7c7b\u578b\uff0c\u4f7f\u7528 EventType \u503c"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"level"}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"\u5426"}),(0,i.jsx)(n.td,{children:"\u4e8b\u4ef6\u7ea7\u522b\uff0c\u9ed8\u8ba4 INFO"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"payload"}),(0,i.jsx)(n.td,{children:"any"}),(0,i.jsx)(n.td,{children:"\u5426"}),(0,i.jsx)(n.td,{children:"\u4e8b\u4ef6\u8f7d\u8377\u6570\u636e"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"spec_version"}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"\u5426"}),(0,i.jsx)(n.td,{children:'\u89c4\u8303\u7248\u672c\uff0c\u9ed8\u8ba4 "agent-events/1.0"'})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"event_id"}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"\u5426"}),(0,i.jsx)(n.td,{children:"\u4e8b\u4ef6 ID\uff0c\u7531\u7f51\u5173\u81ea\u52a8\u751f\u6210"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"ts"}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"\u5426"}),(0,i.jsx)(n.td,{children:"\u65f6\u95f4\u6233\uff0c\u7531\u7f51\u5173\u81ea\u52a8\u751f\u6210"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"seq"}),(0,i.jsx)(n.td,{children:"int"}),(0,i.jsx)(n.td,{children:"\u5426"}),(0,i.jsx)(n.td,{children:"\u5e8f\u5217\u53f7\uff0c\u7531\u7f51\u5173\u81ea\u52a8\u751f\u6210"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"content_type"}),(0,i.jsx)(n.td,{children:"string"}),(0,i.jsx)(n.td,{children:"\u5426"}),(0,i.jsx)(n.td,{children:"\u5185\u5bb9\u7c7b\u578b"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"source"}),(0,i.jsx)(n.td,{children:"dict"}),(0,i.jsx)(n.td,{children:"\u5426"}),(0,i.jsx)(n.td,{children:"\u6765\u6e90\u4fe1\u606f"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"trace"}),(0,i.jsx)(n.td,{children:"dict"}),(0,i.jsx)(n.td,{children:"\u5426"}),(0,i.jsx)(n.td,{children:"\u94fe\u8def\u8ffd\u8e2a\u4fe1\u606f"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"tags"}),(0,i.jsx)(n.td,{children:"dict"}),(0,i.jsx)(n.td,{children:"\u5426"}),(0,i.jsx)(n.td,{children:"\u81ea\u5b9a\u4e49\u6807\u7b7e"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"appendresult",children:"AppendResult"}),"\n",(0,i.jsx)(n.p,{children:"\u8ffd\u52a0\u4e8b\u4ef6\u7684\u7ed3\u679c\u3002"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"result = await client.append(event)\nprint(result.event_id)    # \u4e8b\u4ef6 ID\nprint(result.seq)         # \u5e8f\u5217\u53f7\nprint(result.stream_id)   # \u6d41 ID\uff08\u53ef\u9009\uff09\nprint(result.duplicated)  # \u662f\u5426\u91cd\u590d\n"})}),"\n",(0,i.jsx)(n.h3,{id:"gatewayerror",children:"GatewayError"}),"\n",(0,i.jsx)(n.p,{children:"\u7f51\u5173\u9519\u8bef\u5f02\u5e38\u3002"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'from eventide import GatewayClient, GatewayError\n\ntry:\n    await client.append(event)\nexcept GatewayError as e:\n    print(f"Status: {e.status}")\n    print(f"Body: {e.body}")\n'})}),"\n",(0,i.jsx)(n.h2,{id:"\u5ba2\u6237\u7aef\u4f7f\u7528",children:"\u5ba2\u6237\u7aef\u4f7f\u7528"}),"\n",(0,i.jsx)(n.h3,{id:"\u521d\u59cb\u5316\u5ba2\u6237\u7aef",children:"\u521d\u59cb\u5316\u5ba2\u6237\u7aef"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'from eventide import GatewayClient\n\n# \u9ed8\u8ba4\u914d\u7f6e\nclient = GatewayClient("http://127.0.0.1:18081")\n\n# \u81ea\u5b9a\u4e49\u8d85\u65f6\nclient = GatewayClient("http://127.0.0.1:18081", timeout=30.0)\n\n# \u4f7f\u7528 async with \u81ea\u52a8\u7ba1\u7406\u8fde\u63a5\nasync with GatewayClient("http://127.0.0.1:18081") as client:\n    await client.append(event)\n'})}),"\n",(0,i.jsx)(n.h3,{id:"\u8ffd\u52a0\u5355\u4e2a\u4e8b\u4ef6",children:"\u8ffd\u52a0\u5355\u4e2a\u4e8b\u4ef6"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'from eventide import GatewayClient, Event, EventType\n\nasync with GatewayClient("http://127.0.0.1:18081") as client:\n    result = await client.append(Event(\n        thread_id="t1",\n        turn_id="turn1",\n        type=EventType.TURN_STARTED,\n        payload={"input": {"msg": "hello"}},\n    ))\n    print(f"Event appended: {result.event_id}, seq: {result.seq}")\n'})}),"\n",(0,i.jsx)(n.h3,{id:"\u6279\u91cf\u8ffd\u52a0\u4e8b\u4ef6",children:"\u6279\u91cf\u8ffd\u52a0\u4e8b\u4ef6"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'from eventide import GatewayClient, Event, EventType\n\nasync with GatewayClient("http://127.0.0.1:18081") as client:\n    events = [\n        Event(thread_id="t1", turn_id="turn1", type=EventType.TURN_STARTED),\n        Event(thread_id="t1", turn_id="turn1", type=EventType.MESSAGE_DELTA, payload={"delta": "Hello"}),\n        Event(thread_id="t1", turn_id="turn1", type=EventType.TURN_COMPLETED),\n    ]\n    results = await client.append_all(events)\n'})}),"\n",(0,i.jsx)(n.h3,{id:"\u5173\u95ed\u5ba2\u6237\u7aef",children:"\u5173\u95ed\u5ba2\u6237\u7aef"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'client = GatewayClient("http://127.0.0.1:18081")\ntry:\n    await client.append(event)\nfinally:\n    await client.close()\n'})}),"\n",(0,i.jsx)(n.h2,{id:"\u5b8c\u6574\u793a\u4f8b",children:"\u5b8c\u6574\u793a\u4f8b"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'import asyncio\nfrom eventide import GatewayClient, Event, EventType, Level\n\nasync def main():\n    async with GatewayClient("http://127.0.0.1:18081") as client:\n        # \u53d1\u9001 Turn \u5f00\u59cb\u4e8b\u4ef6\n        start_result = await client.append(Event(\n            thread_id="thread_demo",\n            turn_id="turn_001",\n            type=EventType.TURN_STARTED,\n            level=Level.INFO,\n            payload={\n                "input": {\n                    "type": "message",\n                    "content": "Hello, world!"\n                }\n            }\n        ))\n        print(f"Turn started: {start_result.event_id}")\n\n        # \u53d1\u9001\u6d88\u606f\u589e\u91cf\n        await client.append(Event(\n            thread_id="thread_demo",\n            turn_id="turn_001",\n            type=EventType.MESSAGE_DELTA,\n            payload={"delta": "Hello"}\n        ))\n\n        # \u53d1\u9001\u6d88\u606f\u5b8c\u6210\n        await client.append(Event(\n            thread_id="thread_demo",\n            turn_id="turn_001",\n            type=EventType.MESSAGE_COMPLETED,\n            payload={"content": "Hello, world!"}\n        ))\n\n        # \u53d1\u9001 Turn \u5b8c\u6210\u4e8b\u4ef6\n        await client.append(Event(\n            thread_id="thread_demo",\n            turn_id="turn_001",\n            type=EventType.TURN_COMPLETED,\n            payload={"status": "success"}\n        ))\n\nif __name__ == "__main__":\n    asyncio.run(main())\n'})})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},8453(e,n,t){t.d(n,{R:()=>l,x:()=>s});var d=t(6540);const i={},r=d.createContext(i);function l(e){const n=d.useContext(r);return d.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),d.createElement(r.Provider,{value:n},e.children)}}}]);