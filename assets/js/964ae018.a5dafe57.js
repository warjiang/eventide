"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[7443],{3588(e,n,d){d.r(n),d.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>j,frontMatter:()=>i,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"api-reference","title":"API \u5b9a\u4e49","description":"Beacon \u670d\u52a1","source":"@site/docs/api-reference.md","sourceDirName":".","slug":"/api-reference","permalink":"/eventide/docs/api-reference","draft":false,"unlisted":false,"editUrl":"https://github.com/warjiang/eventide/tree/main/website/docs/api-reference.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Event \u5b9a\u4e49","permalink":"/eventide/docs/event-types"},"next":{"title":"Python SDK","permalink":"/eventide/docs/sdk/python-sdk"}}');var s=d(4848),h=d(8453);const i={sidebar_position:2},t="API \u5b9a\u4e49",c={},l=[{value:"Beacon \u670d\u52a1",id:"beacon-\u670d\u52a1",level:2},{value:"Base URL",id:"base-url",level:3},{value:"\u5065\u5eb7\u68c0\u67e5",id:"\u5065\u5eb7\u68c0\u67e5",level:3},{value:"Thread",id:"thread",level:3},{value:"\u83b7\u53d6 Thread \u4fe1\u606f",id:"\u83b7\u53d6-thread-\u4fe1\u606f",level:4},{value:"Events",id:"events",level:3},{value:"\u83b7\u53d6\u4e8b\u4ef6\u5217\u8868",id:"\u83b7\u53d6\u4e8b\u4ef6\u5217\u8868",level:4},{value:"\u5b9e\u65f6\u4e8b\u4ef6\u6d41 (SSE)",id:"\u5b9e\u65f6\u4e8b\u4ef6\u6d41-sse",level:4},{value:"Archives",id:"archives",level:3},{value:"\u83b7\u53d6\u5f52\u6863\u5217\u8868",id:"\u83b7\u53d6\u5f52\u6863\u5217\u8868",level:4},{value:"\u4e0b\u8f7d\u5f52\u6863\u6587\u4ef6",id:"\u4e0b\u8f7d\u5f52\u6863\u6587\u4ef6",level:4},{value:"\u4e8b\u4ef6\u7c7b\u578b",id:"\u4e8b\u4ef6\u7c7b\u578b",level:2},{value:"\u4e8b\u4ef6\u7ea7\u522b",id:"\u4e8b\u4ef6\u7ea7\u522b",level:2}];function x(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,h.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"api-\u5b9a\u4e49",children:"API \u5b9a\u4e49"})}),"\n",(0,s.jsx)(n.h2,{id:"beacon-\u670d\u52a1",children:"Beacon \u670d\u52a1"}),"\n",(0,s.jsx)(n.p,{children:"Beacon \u662f Eventide \u7684\u53ea\u8bfb API \u670d\u52a1\uff0c\u63d0\u4f9b\u4e8b\u4ef6\u67e5\u8be2\u3001\u5f52\u6863\u4e0b\u8f7d\u548c\u5b9e\u65f6\u6d41\u529f\u80fd\u3002"}),"\n",(0,s.jsx)(n.h3,{id:"base-url",children:"Base URL"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"http://localhost:8080\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u5065\u5eb7\u68c0\u67e5",children:"\u5065\u5eb7\u68c0\u67e5"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"GET"})," ",(0,s.jsx)(n.code,{children:"/healthz"})]}),"\n",(0,s.jsx)(n.p,{children:"\u68c0\u67e5\u670d\u52a1\u5065\u5eb7\u72b6\u6001\u3002"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u54cd\u5e94\u793a\u4f8b"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"ok\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"thread",children:"Thread"}),"\n",(0,s.jsx)(n.h4,{id:"\u83b7\u53d6-thread-\u4fe1\u606f",children:"\u83b7\u53d6 Thread \u4fe1\u606f"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"GET"})," ",(0,s.jsx)(n.code,{children:"/threads/{threadID}"})]}),"\n",(0,s.jsx)(n.p,{children:"\u83b7\u53d6\u6307\u5b9a Thread \u7684\u8be6\u7ec6\u4fe1\u606f\u3002"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u8def\u5f84\u53c2\u6570"})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"\u53c2\u6570"}),(0,s.jsx)(n.th,{children:"\u7c7b\u578b"}),(0,s.jsx)(n.th,{children:"\u63cf\u8ff0"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"threadID"}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"Thread \u7684\u552f\u4e00\u6807\u8bc6"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u54cd\u5e94\u793a\u4f8b"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "thread_id": "thread_abc123",\n  "tenant_id": "tenant_xyz789",\n  "status": "active",\n  "idle_timeout_seconds": 3600,\n  "last_seq": 42\n}\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"events",children:"Events"}),"\n",(0,s.jsx)(n.h4,{id:"\u83b7\u53d6\u4e8b\u4ef6\u5217\u8868",children:"\u83b7\u53d6\u4e8b\u4ef6\u5217\u8868"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"GET"})," ",(0,s.jsx)(n.code,{children:"/threads/{threadID}/events"})]}),"\n",(0,s.jsx)(n.p,{children:"\u83b7\u53d6\u6307\u5b9a Thread \u7684\u4e8b\u4ef6\u5217\u8868\u3002"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u8def\u5f84\u53c2\u6570"})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"\u53c2\u6570"}),(0,s.jsx)(n.th,{children:"\u7c7b\u578b"}),(0,s.jsx)(n.th,{children:"\u63cf\u8ff0"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"threadID"}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"Thread \u7684\u552f\u4e00\u6807\u8bc6"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u67e5\u8be2\u53c2\u6570"})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"\u53c2\u6570"}),(0,s.jsx)(n.th,{children:"\u7c7b\u578b"}),(0,s.jsx)(n.th,{children:"\u9ed8\u8ba4\u503c"}),(0,s.jsx)(n.th,{children:"\u63cf\u8ff0"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"from_seq"}),(0,s.jsx)(n.td,{children:"int64"}),(0,s.jsx)(n.td,{children:"0"}),(0,s.jsx)(n.td,{children:"\u8d77\u59cb\u5e8f\u5217\u53f7"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"limit"}),(0,s.jsx)(n.td,{children:"int"}),(0,s.jsx)(n.td,{children:"500"}),(0,s.jsx)(n.td,{children:"\u8fd4\u56de\u4e8b\u4ef6\u6570\u91cf\uff0c\u6700\u5927 5000"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u54cd\u5e94\u793a\u4f8b"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "events": [\n    {\n      "event_id": "evt_001",\n      "thread_id": "thread_abc123",\n      "turn_id": "turn_001",\n      "seq": 1,\n      "type": "TurnStarted",\n      "level": "info",\n      "payload": "{}",\n      "ts": "2024-01-01T00:00:00Z"\n    }\n  ]\n}\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h4,{id:"\u5b9e\u65f6\u4e8b\u4ef6\u6d41-sse",children:"\u5b9e\u65f6\u4e8b\u4ef6\u6d41 (SSE)"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"GET"})," ",(0,s.jsx)(n.code,{children:"/threads/{threadID}/events/stream"})]}),"\n",(0,s.jsx)(n.p,{children:"\u901a\u8fc7 Server-Sent Events (SSE) \u63a5\u6536\u5b9e\u65f6\u4e8b\u4ef6\u3002"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u8def\u5f84\u53c2\u6570"})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"\u53c2\u6570"}),(0,s.jsx)(n.th,{children:"\u7c7b\u578b"}),(0,s.jsx)(n.th,{children:"\u63cf\u8ff0"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"threadID"}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"Thread \u7684\u552f\u4e00\u6807\u8bc6"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u67e5\u8be2\u53c2\u6570"})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"\u53c2\u6570"}),(0,s.jsx)(n.th,{children:"\u7c7b\u578b"}),(0,s.jsx)(n.th,{children:"\u63cf\u8ff0"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"after_seq"}),(0,s.jsx)(n.td,{children:"int64"}),(0,s.jsx)(n.td,{children:"\u5f00\u59cb\u63a5\u6536\u7684\u5e8f\u5217\u53f7\uff08\u4e0d\u5305\u542b\uff09"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"turn_id"}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"\u53ea\u63a5\u6536\u6307\u5b9a turn \u7684\u4e8b\u4ef6\uff08\u591a\u4e2a\u7528\u9017\u53f7\u5206\u9694\uff09"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"turn_ids"}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"\u53ea\u63a5\u6536\u6307\u5b9a turns \u7684\u4e8b\u4ef6\uff08\u591a\u4e2a\u7528\u9017\u53f7\u5206\u9694\uff09"})]})]})]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u54cd\u5e94\u683c\u5f0f"}),"\nSSE \u683c\u5f0f\uff0c\u6bcf\u4e2a\u4e8b\u4ef6\u5305\u542b\uff1a"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"data"}),": JSON \u683c\u5f0f\u7684\u4e8b\u4ef6\u6570\u636e"]}),"\n",(0,s.jsxs)(n.li,{children:["\u4e8b\u4ef6\u7c7b\u578b\uff1a",(0,s.jsx)(n.code,{children:"agent_event"})," \u6216 ",(0,s.jsx)(n.code,{children:"done"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u793a\u4f8b"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'data: {"event_id":"evt_001","type":"TurnStarted","...","payload":"..."}\n\ndata: [DONE]\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"archives",children:"Archives"}),"\n",(0,s.jsx)(n.h4,{id:"\u83b7\u53d6\u5f52\u6863\u5217\u8868",children:"\u83b7\u53d6\u5f52\u6863\u5217\u8868"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"GET"})," ",(0,s.jsx)(n.code,{children:"/threads/{threadID}/archives"})]}),"\n",(0,s.jsx)(n.p,{children:"\u83b7\u53d6\u6307\u5b9a Thread \u7684\u5f52\u6863\u5217\u8868\u3002"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u8def\u5f84\u53c2\u6570"})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"\u53c2\u6570"}),(0,s.jsx)(n.th,{children:"\u7c7b\u578b"}),(0,s.jsx)(n.th,{children:"\u63cf\u8ff0"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"threadID"}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"Thread \u7684\u552f\u4e00\u6807\u8bc6"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u67e5\u8be2\u53c2\u6570"})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"\u53c2\u6570"}),(0,s.jsx)(n.th,{children:"\u7c7b\u578b"}),(0,s.jsx)(n.th,{children:"\u9ed8\u8ba4\u503c"}),(0,s.jsx)(n.th,{children:"\u63cf\u8ff0"})]})}),(0,s.jsx)(n.tbody,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"limit"}),(0,s.jsx)(n.td,{children:"int"}),(0,s.jsx)(n.td,{children:"100"}),(0,s.jsx)(n.td,{children:"\u8fd4\u56de\u5f52\u6863\u6570\u91cf\uff0c\u6700\u5927 1000"})]})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u54cd\u5e94\u793a\u4f8b"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "archives": [\n    {\n      "archive_id": "arch_001",\n      "thread_id": "thread_abc123",\n      "from_seq": 0,\n      "to_seq": 100,\n      "object_key": "archives/thread_abc123/arch_001.tar.gz",\n      "content_type": "application/gzip",\n      "content_encoding": "gzip",\n      "event_count": 101\n    }\n  ]\n}\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h4,{id:"\u4e0b\u8f7d\u5f52\u6863\u6587\u4ef6",children:"\u4e0b\u8f7d\u5f52\u6863\u6587\u4ef6"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"GET"})," ",(0,s.jsx)(n.code,{children:"/threads/{threadID}/archives/{archiveID}"})]}),"\n",(0,s.jsx)(n.p,{children:"\u4e0b\u8f7d\u6307\u5b9a\u7684\u5f52\u6863\u6587\u4ef6\u3002"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u8def\u5f84\u53c2\u6570"})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"\u53c2\u6570"}),(0,s.jsx)(n.th,{children:"\u7c7b\u578b"}),(0,s.jsx)(n.th,{children:"\u63cf\u8ff0"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"threadID"}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"Thread \u7684\u552f\u4e00\u6807\u8bc6"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"archiveID"}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:"\u5f52\u6863\u7684\u552f\u4e00\u6807\u8bc6"})]})]})]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u54cd\u5e94"}),"\n\u8fd4\u56de\u5f52\u6863\u6587\u4ef6\u5185\u5bb9\uff0c\u8bbe\u7f6e\u9002\u5f53\u7684 ",(0,s.jsx)(n.code,{children:"Content-Type"})," \u548c ",(0,s.jsx)(n.code,{children:"Content-Encoding"})," \u5934\u3002"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"\u4e8b\u4ef6\u7c7b\u578b",children:"\u4e8b\u4ef6\u7c7b\u578b"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"\u7c7b\u578b"}),(0,s.jsx)(n.th,{children:"\u63cf\u8ff0"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"TurnStarted"})}),(0,s.jsx)(n.td,{children:"Turn \u5f00\u59cb"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"TurnCompleted"})}),(0,s.jsx)(n.td,{children:"Turn \u5b8c\u6210"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"TurnFailed"})}),(0,s.jsx)(n.td,{children:"Turn \u5931\u8d25"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"TurnCancelled"})}),(0,s.jsx)(n.td,{children:"Turn \u53d6\u6d88"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"\u4e8b\u4ef6\u7ea7\u522b",children:"\u4e8b\u4ef6\u7ea7\u522b"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"\u7ea7\u522b"}),(0,s.jsx)(n.th,{children:"\u63cf\u8ff0"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"info"})}),(0,s.jsx)(n.td,{children:"\u4fe1\u606f"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"warning"})}),(0,s.jsx)(n.td,{children:"\u8b66\u544a"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"error"})}),(0,s.jsx)(n.td,{children:"\u9519\u8bef"})]})]})]})]})}function j(e={}){const{wrapper:n}={...(0,h.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(x,{...e})}):x(e)}},8453(e,n,d){d.d(n,{R:()=>i,x:()=>t});var r=d(6540);const s={},h=r.createContext(s);function i(e){const n=r.useContext(h);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),r.createElement(h.Provider,{value:n},e.children)}}}]);